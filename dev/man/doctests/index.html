<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Doctests · Documenter.jl</title><meta name="title" content="Doctests · Documenter.jl"/><meta property="og:title" content="Doctests · Documenter.jl"/><meta property="twitter:title" content="Doctests · Documenter.jl"/><meta name="description" content="Documentation for Documenter.jl."/><meta property="og:description" content="Documentation for Documenter.jl."/><meta property="twitter:description" content="Documentation for Documenter.jl."/><meta property="og:url" content="https://documenter.juliadocs.org/stable/man/doctests/"/><meta property="twitter:url" content="https://documenter.juliadocs.org/stable/man/doctests/"/><link rel="canonical" href="https://documenter.juliadocs.org/stable/man/doctests/"/><meta property="og:image" content="https://documenter.juliadocs.org/stable/assets/preview.png"/><meta property="twitter:image" content="https://documenter.juliadocs.org/stable/assets/preview.png"/><meta property="twitter:card" content="summary_large_image"/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-136089579-2"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-136089579-2', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Documenter.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Documenter.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Documenter.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../guide/">Guide</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../syntax/">Syntax</a></li><li class="is-active"><a class="tocitem" href>Doctests</a><ul class="internal"><li><a class="tocitem" href="#&quot;Script&quot;-Examples"><span>&quot;Script&quot; Examples</span></a></li><li><a class="tocitem" href="#REPL-Examples"><span>REPL Examples</span></a></li><li><a class="tocitem" href="#Exceptions"><span>Exceptions</span></a></li><li><a class="tocitem" href="#Preserving-Definitions-Between-Blocks"><span>Preserving Definitions Between Blocks</span></a></li><li><a class="tocitem" href="#Setup-and-Teardown-Code"><span>Setup and Teardown Code</span></a></li><li><a class="tocitem" href="#Filtering-Doctests"><span>Filtering Doctests</span></a></li><li><a class="tocitem" href="#Doctesting-as-Part-of-Testing"><span>Doctesting as Part of Testing</span></a></li><li><a class="tocitem" href="#Fixing-Outdated-Doctests"><span>Fixing Outdated Doctests</span></a></li><li><a class="tocitem" href="#Skipping-Doctests"><span>Skipping Doctests</span></a></li></ul></li><li><a class="tocitem" href="../latex/"><span>$\LaTeX$</span> Syntax</a></li><li><a class="tocitem" href="../hosting/">Hosting Documentation</a></li><li><a class="tocitem" href="../other-formats/">Other Output Formats</a></li></ul></li><li><a class="tocitem" href="../../showcase/">Showcase</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../lib/public/">Public API</a></li><li><a class="tocitem" href="../../lib/remote-links/">Remote repository links</a></li><li><a class="tocitem" href="../../lib/semver/">Semantic versioning</a></li></ul></li><li><span class="tocitem">Developers</span><ul><li><a class="tocitem" href="../../contributing/">Contributing</a></li><li><a class="tocitem" href="../../checklists/">Checklists</a></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lib/internals/anchors/">Anchors</a></li><li><a class="tocitem" href="../../lib/internals/builder/">Builder</a></li><li><a class="tocitem" href="../../lib/internals/crossref/">Crossrefs</a></li><li><a class="tocitem" href="../../lib/internals/deploydocs/">Deploydocs</a></li><li><a class="tocitem" href="../../lib/internals/docchecks/">DocChecks</a></li><li><a class="tocitem" href="../../lib/internals/docmeta/">DocMeta</a></li><li><a class="tocitem" href="../../lib/internals/docsystem/">DocSystem</a></li><li><a class="tocitem" href="../../lib/internals/doctests/">DocTests</a></li><li><a class="tocitem" href="../../lib/internals/documentertools/">DocumenterTools</a></li><li><a class="tocitem" href="../../lib/internals/documents/">Documents</a></li><li><a class="tocitem" href="../../lib/internals/dom/">DOM</a></li><li><a class="tocitem" href="../../lib/internals/expanders/">Expanders</a></li><li><a class="tocitem" href="../../lib/internals/jsdependencies/">JSDependencies</a></li><li><a class="tocitem" href="../../lib/internals/mdflatten/">MDFlatten</a></li><li><a class="tocitem" href="../../lib/internals/selectors/">Selectors</a></li><li><a class="tocitem" href="../../lib/internals/textdiff/">TextDiff</a></li><li><a class="tocitem" href="../../lib/internals/utilities/">Utilities</a></li><li><a class="tocitem" href="../../lib/internals/writers/">Writers</a></li></ul></li></ul></li><li><a class="tocitem" href="../../release-notes/">Release notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Doctests</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Doctests</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaDocs/Documenter.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaDocs/Documenter.jl/blob/master/docs/src/man/doctests.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Doctests"><a class="docs-heading-anchor" href="#Doctests">Doctests</a><a id="Doctests-1"></a><a class="docs-heading-anchor-permalink" href="#Doctests" title="Permalink"></a></h1><p>Documenter will, by default, run <code>jldoctest</code> code blocks that it finds and makes sure that the actual output matches what&#39;s in the doctest. This can help to avoid documentation examples from becoming outdated, incorrect, or misleading. It is recommended that as many of a package&#39;s examples as possible be runnable by Documenter&#39;s doctest. Doctest failures during <a href="../../lib/public/#Documenter.makedocs"><code>makedocs</code></a> are fatal by default, but can be turned into just warnings by passing <code>warnonly=:doctest</code> to <code>makedocs</code>.</p><p>This section of the manual outlines how to go about enabling doctests for code blocks in your package&#39;s documentation.</p><h2 id="&quot;Script&quot;-Examples"><a class="docs-heading-anchor" href="#&quot;Script&quot;-Examples">&quot;Script&quot; Examples</a><a id="&quot;Script&quot;-Examples-1"></a><a class="docs-heading-anchor-permalink" href="#&quot;Script&quot;-Examples" title="Permalink"></a></h2><p>The first, of two, types of doctests is the &quot;script&quot; code block. To make Documenter detect this kind of code block the following format must be used:</p><pre><code class="language-markdown hljs">```jldoctest
a = 1
b = 2
a + b

# output

3
```</code></pre><p>The code block&#39;s &quot;language&quot; must be <code>jldoctest</code> and must include a line containing exactly the text <code># output</code>. The text before this line is the contents of the script that is run. The text that appears after <code># output</code> is the textual representation that would be shown in the Julia REPL if the script had been <code>include</code>d. In particular, semicolons <code>;</code> at the end of a line have no effect.</p><p>The actual output produced by running the &quot;script&quot; is compared to the expected result and any difference will result in <a href="../../lib/public/#Documenter.makedocs"><code>makedocs</code></a> throwing an error and terminating.</p><p>Note that the amount of whitespace appearing above and below the <code># output</code> line is not significant and can be increased or decreased if desired.</p><p>It is possible to suppress the output from the doctest by setting the <code>output</code> keyword argument to <code>false</code>, for example</p><pre><code class="language-markdown hljs">```jldoctest; output = false
a = 1
b = 2
a + b

# output

3
```</code></pre><p>Note that the output of the script will still be compared to the expected result, i.e. what is <code># output</code> section, but the <code># output</code> section will be suppressed in the rendered documentation.</p><h2 id="REPL-Examples"><a class="docs-heading-anchor" href="#REPL-Examples">REPL Examples</a><a id="REPL-Examples-1"></a><a class="docs-heading-anchor-permalink" href="#REPL-Examples" title="Permalink"></a></h2><p>The other kind of doctest is a simulated Julia REPL session. The following format is detected by Documenter as a REPL doctest:</p><pre><code class="language-markdown hljs">```jldoctest
julia&gt; a = 1
1

julia&gt; b = 2;

julia&gt; c = 3;  # comment

julia&gt; a + b + c
6
```</code></pre><p>As with script doctests, the code block must have it&#39;s language set to <code>jldoctest</code>. When a code block contains one or more <code>julia&gt;</code> at the start of a line then it is assumed to be a REPL doctest. Semi-colons, <code>;</code>, at the end of a line works in the same way as in the Julia REPL and will suppress the output, although the line is still evaluated.</p><p>Note that not all features of the REPL are supported such as shell and help modes.</p><div class="admonition is-info" id="Soft-vs-hard-scope-ac41b9ef0d2e28e5"><header class="admonition-header">Soft vs hard scope<a class="admonition-anchor" href="#Soft-vs-hard-scope-ac41b9ef0d2e28e5" title="Permalink"></a></header><div class="admonition-body"><p>Julia 1.5 changed the REPL to use the <em>soft scope</em> when handling global variables in <code>for</code> loops etc. When using Documenter with Julia 1.5 or above, Documenter uses the soft scope in <code>@repl</code>-blocks and REPL-type doctests.</p></div></div><h2 id="Exceptions"><a class="docs-heading-anchor" href="#Exceptions">Exceptions</a><a id="Exceptions-1"></a><a class="docs-heading-anchor-permalink" href="#Exceptions" title="Permalink"></a></h2><p>Doctests can also test for thrown exceptions and their stacktraces. Comparing of the actual and expected results is done by checking whether the expected result matches the start of the actual result. Hence, both of the following errors will match the actual result.</p><pre><code class="language-markdown hljs">```jldoctest
julia&gt; div(1, 0)
ERROR: DivideError: integer division error
 in div(::Int64, ::Int64) at ./int.jl:115

julia&gt; div(1, 0)
ERROR: DivideError: integer division error
```</code></pre><p>If instead the first <code>div(1, 0)</code> error was written as</p><pre><code class="language-markdown hljs">```jldoctest
julia&gt; div(1, 0)
ERROR: DivideError: integer division error
 in div(::Int64, ::Int64) at ./int.jl:114
```</code></pre><p>where line <code>115</code> is replaced with <code>114</code> then the doctest will fail.</p><p>In the second <code>div(1, 0)</code>, where no stacktrace is shown, it may appear to the reader that it is expected that no stacktrace will actually be displayed when they attempt to try to recreate the error themselves. To indicate to readers that the output result is truncated and does not display the entire (or any of) the stacktrace you may write <code>[...]</code> at the line where checking should stop, i.e.</p><pre><code class="language-markdown hljs">```jldoctest
julia&gt; div(1, 0)
ERROR: DivideError: integer division error
[...]
```</code></pre><h2 id="Preserving-Definitions-Between-Blocks"><a class="docs-heading-anchor" href="#Preserving-Definitions-Between-Blocks">Preserving Definitions Between Blocks</a><a id="Preserving-Definitions-Between-Blocks-1"></a><a class="docs-heading-anchor-permalink" href="#Preserving-Definitions-Between-Blocks" title="Permalink"></a></h2><p>Every doctest block is evaluated inside its own <code>module</code>. This means that definitions (types, variables, functions etc.) from a block can <em>not</em> be used in the next block. For example:</p><pre><code class="language-markdown hljs">```jldoctest
julia&gt; foo = 42
42
```</code></pre><p>The variable <code>foo</code> will not be defined in the next block:</p><pre><code class="language-markdown hljs">```jldoctest
julia&gt; println(foo)
ERROR: UndefVarError: foo not defined
```</code></pre><p>To preserve definitions it is possible to label blocks in order to collect several blocks into the same module. All blocks with the same label (in the same file) will be evaluated in the same module, and hence share scope. This can be useful if the same definitions are used in more than one block, with for example text, or other doctest blocks, in between. Example:</p><pre><code class="language-markdown hljs">```jldoctest mylabel
julia&gt; foo = 42
42
```</code></pre><p>Now, since the block below has the same label as the block above, the variable <code>foo</code> can be used:</p><pre><code class="language-markdown hljs">```jldoctest mylabel
julia&gt; println(foo)
42
```</code></pre><div class="admonition is-info" id="Note-54613c3cec40485c"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-54613c3cec40485c" title="Permalink"></a></header><div class="admonition-body"><p>Labeled doctest blocks do not need to be consecutive (as in the example above) to be included in the same module. They can be interspaced with unlabeled blocks or blocks with another label.</p></div></div><h2 id="Setup-and-Teardown-Code"><a class="docs-heading-anchor" href="#Setup-and-Teardown-Code">Setup and Teardown Code</a><a id="Setup-and-Teardown-Code-1"></a><a class="docs-heading-anchor-permalink" href="#Setup-and-Teardown-Code" title="Permalink"></a></h2><p>Doctests may require some setup code that must be evaluated prior to that of the actual example, but that should not be displayed in the final documentation. Similarly, some teardown code may need to be evaluated after the example (e.g. to release a resource or restore a setting modified during setup). There are three ways to specify setup and teardown code, each appropriate in a different situation.</p><div class="admonition is-compat" id="Documenter-1.9-8d670983d2567312"><header class="admonition-header">Documenter 1.9<a class="admonition-anchor" href="#Documenter-1.9-8d670983d2567312" title="Permalink"></a></header><div class="admonition-body"><p>Teardown code requires at least Documenter 1.9.</p></div></div><h3 id="DocTestSetup-and-DocTestTeardown-in-@meta-blocks"><a class="docs-heading-anchor" href="#DocTestSetup-and-DocTestTeardown-in-@meta-blocks"><code>DocTestSetup</code> and <code>DocTestTeardown</code> in <code>@meta</code> blocks</a><a id="DocTestSetup-and-DocTestTeardown-in-@meta-blocks-1"></a><a class="docs-heading-anchor-permalink" href="#DocTestSetup-and-DocTestTeardown-in-@meta-blocks" title="Permalink"></a></h3><p>For doctests in the Markdown source files, an <code>@meta</code> block containing a <code>DocTestSetup = ...</code> respectively <code>DocTestTeardown = ...</code> value can be used. In the example below, the function <code>foo</code> is defined inside a <code>@meta</code> block. This setup block will be evaluated at the start and the teardown block at the end of the following doctest blocks:</p><pre><code class="language-markdown hljs">```@meta
DocTestSetup = quote
    function foo(x)
        return x^2
    end
end

DocTestTeardown = quote
    # restore settings, release resources, ...
end
```

```jldoctest
julia&gt; foo(2)
4
```

```@meta
DocTestSetup = nothing
DocTestTeardown = nothing
```</code></pre><p>The <code>DocTestSetup = nothing</code> respectively <code>DocTestTeardown = nothing</code> is not strictly necessary, but good practice nonetheless to help avoid unintentional definitions in following doctest blocks.</p><p>While technically the <code>@meta</code> blocks also work within docstrings, their use there is discouraged since the <code>@meta</code> blocks will show up when querying docstrings in the REPL.</p><div class="admonition is-info" id="Historic-note-a48d4a82f03b0471"><header class="admonition-header">Historic note<a class="admonition-anchor" href="#Historic-note-a48d4a82f03b0471" title="Permalink"></a></header><div class="admonition-body"><p>It used to be that <code>DocTestSetup</code>s in <code>@meta</code> blocks in Markdown files that included docstrings also affected the doctests in the docstrings. Since Documenter 0.23 that is no longer the case. You should use <a href="#Module-level-metadata">Module-level metadata</a> or <a href="#Block-level-setup-and-teardown-code">Block-level setup and teardown code</a> instead.</p></div></div><h3 id="Module-level-metadata"><a class="docs-heading-anchor" href="#Module-level-metadata">Module-level metadata</a><a id="Module-level-metadata-1"></a><a class="docs-heading-anchor-permalink" href="#Module-level-metadata" title="Permalink"></a></h3><p>For doctests that are in docstrings, the exported <a href="../../lib/internals/docmeta/#DocMeta"><code>DocMeta</code></a> module provides an API to attach metadata that applies to all the docstrings in a particular module. Setting up the <code>DocTestSetup</code> and <code>DocTestTeardown</code> metadata should be done before the <a href="../../lib/public/#Documenter.makedocs"><code>makedocs</code></a> or <a href="../../lib/public/#Documenter.doctest"><code>doctest</code></a> call:</p><pre><code class="language-julia hljs">using MyPackage, Documenter
DocMeta.setdocmeta!(MyPackage, :DocTestSetup, :(using MyPackage); recursive=true)
makedocs(modules=[MyPackage], ...)</code></pre><div class="admonition is-info" id="Note-b59954da058c3542"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-b59954da058c3542" title="Permalink"></a></header><div class="admonition-body"><p>Make sure to include all (top-level) modules that contain docstrings with doctests in the <code>modules</code> argument to <a href="../../lib/public/#Documenter.makedocs"><code>makedocs</code></a>. Otherwise these doctests will not be run.</p></div></div><h3 id="Block-level-setup-and-teardown-code"><a class="docs-heading-anchor" href="#Block-level-setup-and-teardown-code">Block-level setup and teardown code</a><a id="Block-level-setup-and-teardown-code-1"></a><a class="docs-heading-anchor-permalink" href="#Block-level-setup-and-teardown-code" title="Permalink"></a></h3><p>Yet another option is to use the <code>setup</code> or <code>teardown</code> keyword arguments to the <code>jldoctest</code> block, which is convenient for short definitions, and for setups needed in inline docstrings.</p><pre><code class="language-markdown hljs">```jldoctest; setup = :(foo(x) = x^2)
julia&gt; foo(2)
4
```</code></pre><div class="admonition is-info" id="Note-ad3ef3f3ff1c90ca"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-ad3ef3f3ff1c90ca" title="Permalink"></a></header><div class="admonition-body"><p>The <code>DocTestSetup</code>, <code>DocTestTeardown</code>, <code>setup</code> and <code>teardown</code> values are <strong>re-evaluated</strong> at the start respectively end of <em>each</em> doctest block and no state is shared between any code blocks. To preserve definitions see <a href="#Preserving-Definitions-Between-Blocks">Preserving Definitions Between Blocks</a>.</p></div></div><h2 id="Filtering-Doctests"><a class="docs-heading-anchor" href="#Filtering-Doctests">Filtering Doctests</a><a id="Filtering-Doctests-1"></a><a class="docs-heading-anchor-permalink" href="#Filtering-Doctests" title="Permalink"></a></h2><p>A part of the output of a doctest might be non-deterministic, e.g. pointer addresses and timings. It is possible to use regular expressions to filter out or transform parts of the doctest outputs so that the deterministic part can still be tested.</p><p>A doctest filter is a regular expression and substitution string pair. In a doctest, each match in the expected output and the actual output is replaced according to the filter before the two outputs are compared. For example, in the following, the filter matches floating point numbers and only retains the first 4 digits after the decimal point, replacing the rest with <code>***</code>:</p><pre><code class="language-markdown hljs">```jldoctest; filter = r&quot;(\d*)\.(\d{4})\d+&quot; =&gt; s&quot;\1.\2***&quot;
julia&gt; sqrt(2)
1.4142135623730951
```</code></pre><p>The actual string that gets compared when determining whether the doctest is up to date is actually</p><pre><code class="nohighlight hljs">1.4142***</code></pre><p>The filter can also be just a regular expression in which case the whole matching substring is removed (i.e. the substitution is just <code>&quot;&quot;</code>). For more information on the regular expression and substitution string syntax, see the <a href="https://docs.julialang.org/en/v1/manual/strings/#Regular-Expressions-1">Julia manual</a>.</p><p>The doctest filters can be applied globally, on a per-file basis or to each doctest separately. To apply them globally, i.e. to all doctests in the documentation, a list of filters can be passed to <a href="../../lib/public/#Documenter.makedocs"><code>makedocs</code></a> with the keyword <code>doctestfilters</code>.</p><p>For more fine grained control it is possible to define filters in <code>@meta</code> blocks by assigning them to the <code>DocTestFilters</code> variable, either as a single regular expression (<code>DocTestFilters = [r&quot;foo&quot;]</code>) or as a vector of several regexes (<code>DocTestFilters = [r&quot;foo&quot;, r&quot;bar&quot;]</code>). As an example, to filter out some of the non-deterministic output from <code>@time</code>, the following filtering could be applied:</p><pre><code class="language-markdown hljs">```@meta
DocTestFilters = r&quot;[0-9\.]+ seconds \(.*\)&quot;
```

```jldoctest
julia&gt; @time [1,2,3,4]
  0.000003 seconds (5 allocations: 272 bytes)
4-element Array{Int64,1}:
 1
 2
 3
 4
```

```@meta
DocTestFilters = nothing
```</code></pre><p><code>DocTestFilters = nothing</code> is not strictly necessary, but good practice nonetheless to help avoid unintentional filtering in following doctest blocks.</p><div class="admonition is-info" id="Info-5263b1bef1ed639e"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-5263b1bef1ed639e" title="Permalink"></a></header><div class="admonition-body"><p>The filter match is replaced with an empty string in both the expected and actual output using <code>replace</code>, e.g. <code>replace(str, filter =&gt; substitution)</code>. Note that this means that the same filter can match multiple times, and if you need the same filter to match multiple lines your regex need to account for that.</p></div></div><p>Another option is to use the <code>filter</code> keyword argument. This defines a doctest-local filter which is only active for the specific doctest. Note that such filters are not shared between named doctests either. It is possible to define a filter by a single regex (<code>filter = r&quot;foo&quot;</code>) or as a list of regex (<code>filter = [r&quot;foo-[0-9]+&quot;, r&quot;bar-([0-9]+)&quot; =&gt; s&quot;\1&quot;]</code>). Example:</p><pre><code class="language-markdown hljs">```jldoctest; filter = r&quot;[0-9\.]+ seconds \(.*\)&quot;
julia&gt; @time [1,2,3,4]
  0.000003 seconds (5 allocations: 272 bytes)
4-element Array{Int64,1}:
 1
 2
 3
 4
```</code></pre><div class="admonition is-info" id="Note-8e1fee4db24d88eb"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-8e1fee4db24d88eb" title="Permalink"></a></header><div class="admonition-body"><p>The global filters, filters defined in <code>@meta</code> blocks, and filters defined with the <code>filter</code> keyword argument are all applied to each doctest.</p></div></div><div class="admonition is-info" id="Testing-and-debugging-7feb4ab4f5dec516"><header class="admonition-header">Testing and debugging<a class="admonition-anchor" href="#Testing-and-debugging-7feb4ab4f5dec516" title="Permalink"></a></header><div class="admonition-body"><p>Documenter outputs debug-level logs for each doctest it runs, showing the outputs both before and after filtering. This can be useful when developing doctests to see if the filters are being applied as you expect (e.g. to make sure that they are not too broad or to understand why a filter is not working).</p><p>To enable the debug output, you can set the <code>JULIA_DEBUG</code> environment variable to <code>Documenter</code>, e.g. by doing the following in the <code>make.jl</code> script:</p><pre><code class="language-julia hljs">ENV[&quot;JULIA_DEBUG&quot;] = &quot;Documenter&quot;</code></pre></div></div><h2 id="Doctesting-as-Part-of-Testing"><a class="docs-heading-anchor" href="#Doctesting-as-Part-of-Testing">Doctesting as Part of Testing</a><a id="Doctesting-as-Part-of-Testing-1"></a><a class="docs-heading-anchor-permalink" href="#Doctesting-as-Part-of-Testing" title="Permalink"></a></h2><p>Documenter provides the <a href="../../lib/public/#Documenter.doctest"><code>doctest</code></a> function which can be used to verify all doctests independently of manual builds. It behaves like a <code>@testset</code>, so it will return a testset if all the tests pass or throw a <code>TestSetException</code> if it does not.</p><p>For example, it can be used to verify doctests as part of the normal test suite by having e.g. the following in <code>runtests.jl</code>:</p><pre><code class="language-julia hljs">using Test, Documenter, MyPackage
doctest(MyPackage)</code></pre><p>By default, it will also attempt to verify all the doctests on manual <code>.md</code> files, which it assumes are located under <code>docs/src</code>. This can be configured or disabled with the <code>manual</code> keyword (see <a href="../../lib/public/#Documenter.doctest"><code>doctest</code></a> for more information).</p><p>It can also be included in another testset, in which case it gets incorporated into the parent testset. So, as another example, to test a package that does have separate manual pages, just docstrings, and also collects all the tests into a single testset, the <code>runtests.jl</code> might look as follows:</p><pre><code class="language-julia hljs">using Test, Documenter, MyPackage
@testset &quot;MyPackage&quot; begin
    ... # other tests &amp; testsets
    doctest(MyPackage; manual = false)
    ... # other tests &amp; testsets
end</code></pre><p>Note that you still need to make sure that all the necessary <a href="#Module-level-metadata">Module-level metadata</a> for the doctests is set up before <a href="../../lib/public/#Documenter.doctest"><code>doctest</code></a> is called. Also, you need to add Documenter and all the other packages you are loading in the doctests as test dependencies.</p><h2 id="Fixing-Outdated-Doctests"><a class="docs-heading-anchor" href="#Fixing-Outdated-Doctests">Fixing Outdated Doctests</a><a id="Fixing-Outdated-Doctests-1"></a><a class="docs-heading-anchor-permalink" href="#Fixing-Outdated-Doctests" title="Permalink"></a></h2><p>To fix outdated doctests, the <a href="../../lib/public/#Documenter.doctest"><code>doctest</code></a> function can be called with <code>fix = true</code>. This will run the doctests, and overwrite the old results with the new output. This can be done just in the REPL:</p><pre><code class="language-julia-repl hljs">julia&gt; using Documenter, MyPackage
julia&gt; doctest(MyPackage, fix=true)</code></pre><p>Alternatively, you can also pass the <code>doctest = :fix</code> keyword to <a href="../../lib/public/#Documenter.makedocs"><code>makedocs</code></a>.</p><div class="admonition is-info" id="Note-7fda8390c31ff753"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-7fda8390c31ff753" title="Permalink"></a></header><div class="admonition-body"><ul><li><p>The <code>:fix</code> option currently only works for LF line endings (<code>&#39;\n&#39;</code>)</p></li><li><p>It is recommended to <code>git commit</code> any code changes before running the doctest fixing. That way it is simple to restore to the previous state if the fixing goes wrong.</p></li><li><p>There are some corner cases where the fixing algorithm may replace the wrong code snippet. It is therefore recommended to manually inspect the result of the fixing before committing.</p></li></ul></div></div><h2 id="Skipping-Doctests"><a class="docs-heading-anchor" href="#Skipping-Doctests">Skipping Doctests</a><a id="Skipping-Doctests-1"></a><a class="docs-heading-anchor-permalink" href="#Skipping-Doctests" title="Permalink"></a></h2><p>Doctesting can be disabled by setting the <a href="../../lib/public/#Documenter.makedocs"><code>makedocs</code></a> keyword <code>doctest = false</code>. This should only be done when initially laying out the structure of a package&#39;s documentation, after which it&#39;s encouraged to always run doctests when building docs.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../syntax/">« Syntax</a><a class="docs-footer-nextpage" href="../latex/"><span>$\LaTeX$</span> Syntax »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.0-DEV on <span class="colophon-date" title="Wednesday 7 May 2025 00:26">Wednesday 7 May 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
