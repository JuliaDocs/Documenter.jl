<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Hosting Documentation · Documenter.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Ubuntu+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script></head><body><nav class="toc"><a href><img class="logo" src="../assets/logo.png" alt="Documenter.jl logo"/></a><h1>Documenter.jl</h1><form class="search" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="guide.html">Guide</a></li><li><a class="toctext" href="examples.html">Examples</a></li><li><a class="toctext" href="syntax.html">Syntax</a></li><li><a class="toctext" href="doctests.html">Doctests</a></li><li class="current"><a class="toctext" href="hosting.html">Hosting Documentation</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#SSH-Deploy-Keys-1">SSH Deploy Keys</a></li><li><a class="toctext" href="#.travis.yml-Configuration-1"><code>.travis.yml</code> Configuration</a></li><li><a class="toctext" href="#The-deploydocs-Function-1">The <code>deploydocs</code> Function</a></li><li><a class="toctext" href="#The-MkDocs-mkdocs.yml-File-1">The MkDocs <code>mkdocs.yml</code> File</a></li><li><a class="toctext" href="#.gitignore-1"><code>.gitignore</code></a></li><li><a class="toctext" href="#gh-pages-Branch-1"><code>gh-pages</code> Branch</a></li><li><a class="toctext" href="#Documentation-Versions-1">Documentation Versions</a></li></ul></li><li><a class="toctext" href="latex.html"><span>$\LaTeX$</span> syntax</a></li><li><a class="toctext" href="internals.html">Package Internals</a></li><li><a class="toctext" href="contributing.html">Contributing</a></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="../lib/public.html">Public</a></li><li><a class="toctext" href="../lib/internals.html">Internals</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href="hosting.html">Hosting Documentation</a></li></ul><a class="edit-page" href="https://github.com/JuliaDocs/Documenter.jl/tree/f97c077e42eb8c5db1f2ff0f8af70eba8b665672/docs/src/man/hosting.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Hosting-Documentation-1" href="#Hosting-Documentation-1">Hosting Documentation</a></h1><p>After going through the <a href="guide.html#Package-Guide-1">Package Guide</a> and <a href="doctests.html#Doctests-1">Doctests</a> page you will need to host the generated documentation somewhere for potential users to read. This guide will describe how to setup automatic updates for your package docs using the Travis build service and GitHub Pages. This is the same approach used by this package to host it&#39;s own docs – the docs you&#39;re currently reading.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Following this guide should be the <em>final</em> step you take after you are comfortable with the syntax and build process used by <code>Documenter.jl</code>. Only proceed with the steps outlined on this page once you have successfully used <code>mkdocs</code> locally to build your documentation.  <code>mkdocs</code> can typically be installed using <code>pip install mkdocs</code> in your terminal.</p><p>This guide assumes that you already have GitHub and Travis accounts setup. If not then go set those up first and then return here.</p></div></div><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>Once setup correctly the following will happen each time you push new updates to your package repository:</p><ul><li><p>travis buildbots startup and run your tests;</p></li><li><p>each buildbot will build the package docs using your <code>docs/make.jl</code> script;</p></li><li><p>a single buildbot will then try to push the generated docs back to GitHub.</p></li></ul><p>Note that the hosted documentation does not update when you make pull requests; you see updates only when you merge to <code>master</code> or push new tags.</p><p>The following sections outline how to enable this for your own package.</p><h2><a class="nav-anchor" id="SSH-Deploy-Keys-1" href="#SSH-Deploy-Keys-1">SSH Deploy Keys</a></h2><p>Deploy keys provide push access to a <em>single</em> repository, to allow secure deployment of generated documentation from Travis to GitHub.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>You will need several command line programs installed for the following steps to work. They are <code>which</code>, <code>git</code>, and <code>ssh-keygen</code>. Make sure these are installed before you begin this section.</p></div></div><p>Open a Julia REPL and import <a href="../lib/public.html#Documenter"><code>Documenter</code></a>.</p><pre><code class="language-jlcon">julia&gt; using Documenter</code></pre><p>Then call the <a href="../lib/public.html#Documenter.Travis.genkeys"><code>Travis.genkeys</code></a> function as follows:</p><pre><code class="language-jlcon">julia&gt; Travis.genkeys(&quot;MyPackage&quot;)</code></pre><p>where <code>&quot;MyPackage&quot;</code> is the name of the package you would like to create deploy keys for. The output will look similar to the text below:</p><pre><code class="language-none">INFO: add the public key below to https://github.com/USER/REPO/settings/keys
      with read/write access:

[SSH PUBLIC KEY HERE]

INFO: add a secure environment variable named &#39;DOCUMENTER_KEY&#39; to
      https://travis-ci.org/USER/REPO/settings with value:

[LONG BASE64 ENCODED PRIVATE KEY]</code></pre><p>Follow the instructions that are printed out, namely:</p><ol><li><p>Add the public ssh key to your settings page for the GitHub repository that you are setting up by following the <code>.../settings/key</code> link provided. Click on <strong><code>Add deploy key</code></strong>, enter the name <strong><code>documenter</code></strong> as the title, and copy the public key into the <strong><code>Key</code></strong> field.  Note that you should include <strong>no whitespace</strong> when copying the key. Check <strong><code>Allow write access</code></strong> to allow Documenter to commit the generated documentation to the repo.</p></li><li><p>Next add the long private key to the Travis settings page using the provided link. In the <strong><code>Environment Variables</code></strong> section add a key with the name <code>DOCUMENTER_KEY</code> and the value that was printed out. <strong>Do not</strong> set the variable to be displayed in the build log. Then click <strong><code>Add</code></strong>.</p><div class="admonition warning"><div class="admonition-title">Security warning</div><div class="admonition-text"><p>To reiterate: make sure that the &quot;Display value in build log&quot; option is <strong>OFF</strong> for the variable, so that it does not get printed when the tests run. This base64-encoded string contains the <em>unencrypted</em> private key that gives full write access to your repository, so it must be kept safe.  Also, make sure that you never expose this variable in your tests, nor merge any code that does. You can read more about Travis environment variables in <a href="https://docs.travis-ci.com/user/environment-variables/#Defining-Variables-in-Repository-Settings">Travis User Documentation</a>.</p></div></div></li></ol><h2><a class="nav-anchor" id=".travis.yml-Configuration-1" href="#.travis.yml-Configuration-1"><code>.travis.yml</code> Configuration</a></h2><p>In the <code>after_success</code> section of the <code>.travis.yml</code> file, where code coverage is processed, run your <code>docs/make.jl</code> file:</p><pre><code class="language-yaml">after_success:
  - julia -e &#39;Pkg.add(&quot;Documenter&quot;)&#39;
  - julia -e &#39;cd(Pkg.dir(&quot;PACKAGE_NAME&quot;)); include(joinpath(&quot;docs&quot;, &quot;make.jl&quot;))&#39;</code></pre><h2><a class="nav-anchor" id="The-deploydocs-Function-1" href="#The-deploydocs-Function-1">The <code>deploydocs</code> Function</a></h2><p>At the moment your <code>docs/make.jl</code> file probably only contains</p><pre><code class="language-julia">using Documenter, PACKAGE_NAME

makedocs()</code></pre><p>We&#39;ll need to add an additional call to this file after <a href="../lib/public.html#Documenter.makedocs"><code>makedocs</code></a>. Add the following at the end of the file:</p><pre><code class="language-julia">deploydocs(
    repo = &quot;github.com/USER_NAME/PACKAGE_NAME.jl.git&quot;
)</code></pre><p>where <code>USER_NAME</code> and <code>PACKAGE_NAME</code> must be set to the appropriate names.</p><p>By default <code>deploydocs</code> will deploy the documentation from the <code>nightly</code> Julia build for Linux. This can be changed using the <code>julia</code> and <code>osname</code> keywords as follows:</p><pre><code class="language-julia">deploydocs(
    deps   = Deps.pip(&quot;mkdocs&quot;, &quot;python-markdown-math&quot;),
    repo   = &quot;github.com/USER_NAME/PACKAGE_NAME.jl.git&quot;,
    julia  = &quot;0.4&quot;,
    osname = &quot;osx&quot;
)</code></pre><p>This will deploy the docs from the OSX Julia 0.4 Travis build bot.</p><p>The keyword <code>deps</code> serves to provide the required dependencies to deploy the documentation. In the example above we include the dependencies <a href="http://www.mkdocs.org">mkdocs</a> and <a href="https://github.com/mitya57/python-markdown-math"><code>python-markdown-math</code></a>. The former makes sure that MkDocs is installed to deploy the documentation, and the latter provides the <code>mdx_math</code> markdown extension to exploit MathJax rendering of latex equations in markdown. Other dependencies should be included here.</p><p>See the <a href="../lib/public.html#Documenter.deploydocs"><code>deploydocs</code></a> function documentation for more details.</p><h2><a class="nav-anchor" id="The-MkDocs-mkdocs.yml-File-1" href="#The-MkDocs-mkdocs.yml-File-1">The MkDocs <code>mkdocs.yml</code> File</a></h2><p>We&#39;ll be using <a href="http://www.mkdocs.org">MkDocs</a> to convert the markdown files generated by Documenter to HTML. (This, of course, is not the only option you have for this step. Any markdown to HTML converter should work fine with some amount of setting up.)</p><p>Add an <code>mkdocs.yml</code> file to your <code>docs/</code> directory with the following content:</p><pre><code class="language-yaml">site_name:        PACKAGE_NAME.jl
repo_url:         https://github.com/USER_NAME/PACKAGE_NAME.jl
site_description: Description...
site_author:      USER_NAME

theme: readthedocs

extra_css:
  - assets/Documenter.css

extra_javascript:
  - https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML
  - assets/mathjaxhelper.js

markdown_extensions:
  - extra
  - tables
  - fenced_code
  - mdx_math

docs_dir: &#39;build&#39;

pages:
  - Home: index.md</code></pre><p>This is only a basic skeleton. Read through the MkDocs documentation if you would like to know more about the available settings.</p><h2><a class="nav-anchor" id=".gitignore-1" href="#.gitignore-1"><code>.gitignore</code></a></h2><p>Add the following to your package&#39;s <code>.gitignore</code> file</p><pre><code class="language-none">docs/build/
docs/site/</code></pre><p>These are needed to avoid committing generated content to your repository.</p><h2><a class="nav-anchor" id="gh-pages-Branch-1" href="#gh-pages-Branch-1"><code>gh-pages</code> Branch</a></h2><p>Create a new branch called <code>gh-pages</code> and push it to GitHub. If this branch already exists then you can skip this step, but do note that the generated content is automatically pushed to this branch from Travis.</p><h2><a class="nav-anchor" id="Documentation-Versions-1" href="#Documentation-Versions-1">Documentation Versions</a></h2><p>When documentation is generated it is stored in one of the following folders:</p><ul><li><p><code>latest</code> stores the most recent documentation that is committed to the <code>master</code> branch.</p></li><li><p><code>stable</code> stores the most recent documentation from a tagged commit. Older tagged versions are stored in directories named after their tags. These tagged directories are persistent and must be manually removed from the <code>gh-pages</code> branch if necessary.</p></li></ul><p>Once your documentation has been pushed to the <code>gh-pages</code> branch you should add links to your <code>README.md</code> pointing to the <code>stable</code> and <code>latest</code> documentation URLs. It is common practice to make use of &quot;badges&quot; similar to those used for Travis and AppVeyor build statuses or code coverage. Adding the following to your package <code>README.md</code> should be all that is necessary:</p><pre><code class="language-markdown">[![](https://img.shields.io/badge/docs-stable-blue.svg)](https://USER_NAME.github.io/PACKAGE_NAME.jl/stable)
[![](https://img.shields.io/badge/docs-latest-blue.svg)](https://USER_NAME.github.io/PACKAGE_NAME.jl/latest)</code></pre><p><code>PACKAGE_NAME</code> and <code>USER_NAME</code> should be replaced with their appropriate values. The colour and text of the image can be changed by altering <code>docs-stable-blue</code> as described on <a href="http://shields.io">shields.io</a>, though it is recommended that package authors follow this standard to make it easier for potential users to find documentation links across multiple package README files.</p><hr/><p><strong>Final Remarks</strong></p><p>That should be all that is needed to enable automatic documentation building. Pushing new commits to your <code>master</code> branch should trigger doc builds. <strong>Note that other branches do not trigger these builds and neither do pull requests by potential contributors.</strong></p><p>If you would like to see a more complete example of how this process is setup then take a look at this package&#39;s repository for some inspiration.</p><footer><hr/><a class="previous" href="doctests.html"><span class="direction">Previous</span><span class="title">Doctests</span></a><a class="next" href="latex.html"><span class="direction">Next</span><span class="title"><span>$\LaTeX$</span> syntax</span></a></footer></article></body></html>
